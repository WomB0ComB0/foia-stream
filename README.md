<!--
  Generated by AI-Powered README Generator
  Repository: https://github.com/FOIA-Stream/foia-stream
  Generated: 2025-12-30T08:23:06.858Z
  Format: md
  Style: comprehensive
-->

# üèõÔ∏è FOIA Stream

> **Empowering Public Transparency through Automated Records Management and Agency Accountability.**

FOIA Stream is a high-performance, full-stack monorepo designed to bridge the gap between government agencies and the public. By automating the lifecycle of Freedom of Information Act (FOIA) requests‚Äîfrom drafting and jurisdiction routing to deadline tracking and secure document disclosure‚Äîit transforms a complex legal process into a streamlined, digital workflow.

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](#)
[![License](https://img.shields.io/badge/license-MIT-blue)](#)
[![Version](https://img.shields.io/badge/version-1.0.0-orange)](#)
[![Runtime](https://img.shields.io/badge/runtime-Bun-black)](#)
[![Frontend](https://img.shields.io/badge/frontend-Astro%20%2F%20React-ff5d01)](#)
[![Backend](https://img.shields.io/badge/backend-Hono-00adff)](#)

---

## üìë Table of Contents

- [üîç Overview](#-overview)
- [‚ú® Feature Highlights](#-feature-highlights)
- [üèóÔ∏è Architecture & Design](#Ô∏è-architecture--design)
- [üöÄ Getting Started](#-getting-started)
- [üìñ Usage & Workflows](#-usage--workflows)
- [üîê Security & Compliance](#-security--compliance)
- [üó∫Ô∏è Roadmap & Limitations](#Ô∏è-roadmap--limitations)
- [üõ†Ô∏è Development & Contributing](#Ô∏è-development--contributing)
- [üìÑ License & Contact](#-license--contact)
- [‚ùì FAQ & Troubleshooting](#-faq--troubleshooting)

---

## üîç Overview

**FOIA Stream** is built on the belief that transparency is the bedrock of democracy. While the law mandates public access to records, the practical hurdles‚Äîmissed deadlines, fragmented communication, and opaque filing systems‚Äîoften render those rights inaccessible.

### The Mission
To provide a centralized "Command Center" that professionalizes public records requests. FOIA Stream offers tools for investigative journalists, legal advocates, and concerned citizens to track government responsiveness in real-time.

### Why FOIA Stream?
- **For Citizens:** Remove the guesswork. Use legally-vetted templates and automatic agency routing.
- **For Journalists:** Manage bulk requests across hundreds of jurisdictions with automated follow-ups.
- **For Agencies:** Manage high-volume disclosures with built-in redaction workflows and audit logs.

[Back to top ‚Üë](#-table-of-contents)

---

## ‚ú® Feature Highlights

### üìã Request Management
- **Smart Templates:** Pre-configured drafts for police body-cam footage, use-of-force reports, and financial audits.
- **Deadline Monitoring:** Automated countdowns based on state-specific statutory response times.
- **Status Dashboard:** Visual pipeline moving from `Draft` ‚Üí `Submitted` ‚Üí `In Progress` ‚Üí `Fulfilled`.

### üè¢ Agency Intelligence
- **Verified Directory:** A searchable database of state and local agency contact information.
- **Compliance Scores:** Public-facing metrics on how quickly and thoroughly agencies respond.
- **Jurisdiction Mapping:** Automatic identification of the correct "Records Access Officer".

### üõ°Ô∏è Redaction & Security
- **PDF Redaction Engine:** High-fidelity document redaction that ensures "true" removal of sensitive metadata.
- **Auto-Redaction:** AI-assisted detection of PII (Names, SSNs, Addresses) within uploaded documents.
- **VirusTotal Integration:** Automated malware scanning for all incoming agency responses.

> üí° **Tip:** Use the **Agency Search** component to find the specific "Records Access Officer" email, preventing your request from getting lost in a general "Contact Us" inbox.

[Back to top ‚Üë](#-table-of-contents)

---

## üèóÔ∏è Architecture & Design

FOIA Stream utilizes a **Turborepo** monorepo structure, optimized for the **Bun** runtime. This ensures unified type safety and extreme performance across the entire stack.

### System Component Diagram

```mermaid
graph TD
    subgraph Client_Layer [Frontend: Astro + React]
        UI[User Dashboard]
        Viewer[PDF Redaction Viewer]
        Forms[Request Wizard]
    end

    subgraph API_Layer [Backend: Hono + Bun]
        Gateway[Hono API]
        AuthSvc[Auth & MFA Service]
        RedactSvc[Redaction Engine]
        AgencySvc[Agency Search Service]
    end

    subgraph Persistence [Data Layer]
        DB[(SQLite + Drizzle)]
        Cache[LRU Cache]
        Files[Encrypted File Storage]
    end

    UI --> Gateway
    Gateway --> AuthSvc
    Gateway --> RedactSvc
    Gateway --> AgencySvc
    AuthSvc --> DB
    RedactSvc --> Files
    AgencySvc --> Cache
```

### Core Request Processing Flow

```mermaid
sequenceDiagram
    participant User
    participant API
    participant Redactor
    participant Storage

    User->>API: Upload Document for Redaction
    API->>API: VirusTotal Malware Scan
    API->>Storage: Store Temporary File
    API->>Redactor: Analyze PII (Auto-Redaction)
    Redactor-->>API: Identified Redaction Coordinates
    API-->>User: Preview Redactions in UI
    User->>API: Confirm & Flatten PDF
    API->>Storage: Store "True Redacted" Version
    API-->>User: Download Final Document
```

### Technology Stack Breakdown

| Layer | Technology | Purpose |
| :--- | :--- | :--- |
| **Runtime** | [Bun](https://bun.sh/) | Fast JavaScript all-in-one runtime. |
| **Frontend** | [Astro](https://astro.build/) | Content-focused web framework for the landing and app shells. |
| **UI Components** | [React](https://reactjs.org/) | Interactive "islands" for dashboards and redaction tools. |
| **API** | [Hono](https://hono.dev/) | Ultrafast web framework for the API layer. |
| **ORM** | [Drizzle](https://orm.drizzle.team/) | Type-safe SQL interactions. |
| **Database** | [SQLite](https://sqlite.org/) | Local-first, portable database. |
| **Lint/Format** | [Biome](https://biomejs.dev/) | High-performance toolchain. |

[Back to top ‚Üë](#-table-of-contents)

---

## üöÄ Getting Started

### Prerequisites
- **Bun >= 1.1.0**
- **SQLite 3**
- A [VirusTotal API Key](https://www.virustotal.com/) (Optional, for document scanning)

### Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/FOIA-Stream/foia-stream.git
   cd foia-stream
   ```

2. **Install dependencies:**
   ```bash
   bun install
   ```

3. **Configure Environment:**
   ```bash
   cp apps/api/.env.example apps/api/.env
   ```
   Edit `apps/api/.env` to include your `DATABASE_URL` and `JWT_SECRET`.

4. **Initialize Database:**
   ```bash
   bun run db:generate --filter=api
   bun run db:migrate --filter=api
   bun run db:seed --filter=api
   ```

### Running the Application

| Environment | Command |
| :--- | :--- |
| **Development** | `bun run dev` |
| **Build** | `bun run build` |
| **Test** | `bun run test` |
| **Linting** | `bun run lint` |

[Back to top ‚Üë](#-table-of-contents)

---

## üìñ Usage & Workflows

### Creating a FOIA Request
1. Navigate to the **Dashboard**.
2. Click **"New Request"**.
3. Use the **Agency Search** to find your target jurisdiction.
4. Select a **Template** (e.g., "General Records Request").
5. The system will automatically calculate the expected response date based on local laws.

### Document Redaction Workflow
<details>
<summary><b>View Redaction Steps</b></summary>

1. Upload your received PDF to the **Documents** section.
2. Open the **Redaction Viewer**.
3. Use the "Auto-Suggest" feature to highlight PII.
4. Manually draw boxes over any remaining sensitive info.
5. Click **"Flatten & Export"** to generate a clean PDF where the data is physically removed, not just hidden.
</details>

[Back to top ‚Üë](#-table-of-contents)

---

## üîê Security & Compliance

FOIA Stream is built with strict privacy requirements to handle sensitive legal documents.

- **Encryption at Rest:** All uploaded records are encrypted using AES-256.
- **PII Protection:** Integrated logic for identifying and stripping Personally Identifiable Information.
- **Audit Logs:** Every action (view, download, redact) is logged for chain-of-custody verification.
- **Compliance Documentation:** See the `/compliance` directory for Data Retention Policies and Privacy Impact Assessments.

‚ö†Ô∏è **Warning:** Never upload unredacted documents to a public server without verifying your instance's encryption settings.

[Back to top ‚Üë](#-table-of-contents)

---

## üó∫Ô∏è Roadmap & Limitations

### Current Limitations
- **File Format:** True Redaction currently supports PDF format only.
- **Search:** Agency directory is currently limited to US-based agencies.

### Future Enhancements
- [ ] **OCR Integration:** Automatically convert scanned image-PDFs into searchable text.
- [ ] **Email Integration:** Direct IMAP/SMTP sync to receive agency responses inside the platform.
- [ ] **Collaboration:** Multi-user workspaces for newsrooms and legal teams.

[Back to top ‚Üë](#-table-of-contents)

---

## üõ†Ô∏è Development & Contributing

We welcome contributions from developers, legal experts, and transparency advocates!

### Standards
- **Coding Style:** We use [Biome](https://biomejs.dev/) for linting and formatting. Run `bun run lint:fix` before committing.
- **Testing:** 100% type safety is required. All new features must include Vitest units or Cypress E2E tests.

### PR Guidelines
1. Branch from `main` using `feat/` or `fix/` prefixes.
2. Ensure `bun run test` passes.
3. Update the `CHANGELOG.md` if applicable.

[Back to top ‚Üë](#-table-of-contents)

---

## ‚ùì FAQ & Troubleshooting

**Q: Why use Bun instead of Node.js?**
A: FOIA Stream processes large PDF binaries and high volumes of request data. Bun's native SQLite support and faster startup times significantly reduce latency in the redaction pipeline.

**Q: Is my data safe on a self-hosted instance?**
A: Yes. FOIA Stream is designed for privacy. By self-hosting, you retain 100% ownership of your documents and database.

**Q: The PDF Redactor isn't loading.**
A: Ensure your browser supports WebAssembly (WASM) and check that `pdf.worker.min.mjs` is correctly served from the `/public` directory.

---

## üìÑ License & Contact

- **License:** MIT License. See [LICENSE](LICENSE) for details.
- **Maintainer:** [FOIA Stream Team](https://github.com/FOIA-Stream)
- **Security Issues:** Please report security vulnerabilities to `security@foiastream.org`.

---
*Built with ‚ù§Ô∏è for the Freedom of Information community.*